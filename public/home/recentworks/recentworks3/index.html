<!DOCTYPE html>
<html lang="en-us">
  <head>
  	<meta charset="utf-8">
  	<meta name="viewport"    content="width=device-width, initial-scale=1.0">
  	<meta name="description" content="">
  	<meta name="author"      content="map[]">
    
    	<title>Engenharia de Dados na Transi√ß√£o √† Plataforma SAP</title>
	<link rel="shortcut icon" href="https://testandoumteste.onrender.com/images/gt_favicon.png">

	
	<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.no-icons.min.css" rel="stylesheet">
	
	
	<script defer src="https://use.fontawesome.com/releases/v5.0.11/js/all.js" integrity="sha384-ImVoB8Er8knetgQakxuBS4G3RSkyD8IZVVQCAnmRJrDwqJFYUE4YOv+DbIofcO9C" crossorigin="anonymous"></script>
	
	
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Alice|Open+Sans:400,300,700">
	
	
  
  <link rel="stylesheet" href="https://testandoumteste.onrender.com/css/styles.min.b60e8e0bff16bf1bd17b4fc43385195b3558ff80a591cf805d6d6816f4db82513bf2b42d6a2c23f47c9aaa6ffa46ebf53bf0286e36bfa9443c73d20c30ae3d29.css" integrity="sha512-tg6OC/8WvxvRe0/EM4UZWzVY/4Clkc&#43;AXW1oFvTbglE78rQtaiwj9Hyaqm/6Ruv1O/Aobja/qUQ8c9IMMK49KQ==">

   
  


    <style>
      .img-container {
        text-align: center;
      }
    </style>

    

  </head>
  
  <body class="home">

    
      <header id="header">
  <div id="head" class="parallax" data-parallax-speed="2" style="background-image:url('https://testandoumteste.onrender.com/images/bg_leoart.jpg');">
    <h1 id="logo" class="text-center">
      <img class='img-circle' src="https://testandoumteste.onrender.com/images/leo.jpg" alt="">
      <span class="title">Leonardo Dantas</span>
      <span class="tagline">Sejam muito bem vindos a um pouco do meu mundo.<br>
        <a href="mailto:DantasLeonardoMPRO@gmail.com">DantasLeonardoMPRO@gmail.com</a>
      </span>
   </h1>
</div>

<nav class="navbar navbar-default navbar-sticky">
    <div class="container-fluid">

        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="true">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
        </div>

        <div class="navbar-collapse collapse" id="bs-example-navbar-collapse-1">

            <ul class="nav navbar-nav">
            
                
                <li>
                    <a href="/">home</a>
                </li>
                
            
                
                <li>
                    <a href="/post/">blog</a>
                </li>
                
            
                
                <li>
                    <a href="/about/">About</a>
                </li>
                
            
            </ul>

        </div> 
        
    </div>
</nav>

</header>
    
 
    

<main id="main">

	<div class="container">

		<div class="row topspace">

			<div class="col-sm-8 col-sm-offset-2">

 				<article class="post">

					<header class="entry-header">

 						<div class="entry-meta">

               <span class="posted-on">

                  <time class="entry-date published" datetime="June 24, 2015">June 24, 2015</time>

               </span>
 						</div>

 						<h1 class="entry-title"><a href="https://testandoumteste.onrender.com/home/recentworks/recentworks3/" rel="bookmark">Engenharia de Dados na Transi√ß√£o √† Plataforma SAP</a></h1>

						<div>

							Adequa√ß√£o/Enriquecimento/Unifica√ß√£o das Bases de Dados de Clientes/Especialistas para dar Suporte na Transi√ß√£o √† Plataforma SAP.
					  
						</div>

					</header>

					<span class="image main"><img src="/post/recentworks/Engenharia2.jpg" alt="" /></span><div class="toc">

    <details >

        <summary accesskey="c" title="(Alt + C)">

            <span class="details">Table of Contents</span>

        </summary>

        <div class="inner"><ul>

                <li>

                    <a href="#contextualiza%c3%a7%c3%a3o-do-projeto" aria-label="Contextualiza√ß√£o do Projeto">Contextualiza√ß√£o do Projeto</a><ul>

                        

                <li>

                    <a href="#projeto" aria-label="Projeto">Projeto</a></li></ul>

                </li>

                <li>

                    <a href="#leonardo-dantas" aria-label="Leonardo Dantas">Leonardo Dantas</a>

                </li>

            </ul>

        </div>

    </details>

</div>


					<div class="entry-content">

						<p>A imagem que abre este post busca ilustrar a complexa parte art√≠stica, principalmente no quesito criatividade, do trabalho que envolve a engenharia de dados. H√° tantos caminhos pelos quais o mesmo trabalho poderia ser realizado, os quais os objetivos primordiais estariam ainda bem retratados. O resultado final √© produto de um improviso constante que, embasado em um prop√≥sito, se mant√©m fiel as necessidades da demanda. Como a pr√≥pria palavra criatividade indica, a medida que o fluxo de dados vai sendo gerado, percebe-se o poder que existe no ato de criar quando em atividade, n√£o se trata de planejar toda uma solu√ß√£o, com um resultado final tamb√©m bem estabelecido para o &ldquo;processo de desenvolvimento&rdquo;. Aqui trata-se de, enquanto em atividade, buscando construir um fluxo de dados que transforme de um estado bruto para um estado mais adequado √†s an√°lises que ser√£o desenvolvidas posteriormente, ou mesmo incluindo tais an√°lises dentro do fluxo quando coerente, enquanto em atividade, durante esta constru√ß√£o, v√° se percebendo como as altera√ß√µes, que est√£o em constante desenvolvimento, est√£o cada vez mais relacionadas com o real prop√≥sito de neg√≥cio que d√° origem ao projeto, encontrando uma solu√ß√£o cada vez mais adequada a medida que se exercita esta atividade de busca atrav√©s do ato de fazer, realmente colocando a m√£o na massa e permitindo que sua capacidade criativa compreenda como cada passo-a-passo executado no fluxo se associa com o pr√≥posito final estabelecido para assim permitir compreender os poss√≠veis outros passos, na sequ√™ncia de desenvolvimento, que tamb√©m serviriam aos objetivos estabelecidos, levando em considera√ß√£o os empecilhos e dificuldades que ser√£o encontrados ao longo do fluxo em constru√ß√£o, devido a decis√µes inadequadas que possam naturalmente ter ocorrido e que possuem fundamental import√¢ncia ao longo de todo este processo.</p>
<p>Esta imagem tamb√©m busca transmitir esta mesma ideia a partir da reflex√£o sobre um tipo diferente de quebra-cabe√ßa. Um quebra-cabe√ßa o qual suas pe√ßas quando todas bem unidas n√£o ir√£o mostrar uma solu√ß√£o ideal, pois h√° in√∫meras maneiras de construir um determinado prop√≥sito a partir de distintas estrat√©gias e formas de se conceber um fluxo de dados espec√≠fico, mas ainda assim, com todas estas pe√ßas unidas fica expl√≠cito que, na imagem acima, trata-se de um le√£o. A solu√ß√£o do problema passa pela sua quebra em problemas menores, pequenas pe√ßas que, buscando fazer parte do quebra-cabe√ßa maior, ainda precisam ser testadas quanto a seus pares, seus encaixes. O elemento teste, na constru√ß√£o deste quebra-cabe√ßa, √© algo fundamental, realmente de import√¢ncia significativa. Por mais que a l√≥gica que tenha sido desenvolvida lhe soe bastante razo√°vel e perspicaz na constru√ß√£o de determinado passo, dentro do fluxo, √© preciso estabelecer mecanismos cred√≠veis de se avaliar se as transforma√ß√µes ocasionadas por esta l√≥gica se refletiram conforme o esperado na base de dados, ou seja, por exemplo, se o focinho do le√£o quando acrescentado as demais pe√ßas a sua volta, tamb√©m ajuda na compreens√£o das fei√ß√µes, em ess√™ncia, que deseja-se expressar na imagem, ou seja, se ainda vamos continuar conseguindo enxergar o le√£o.</p>
<p>A ideia deste quebra-cabe√ßa tamb√©m √© diferente no seguinte sentido: as pe√ßas deste quebra-cabe√ßa n√£o necessariamente pertencem exclusivamente a ele. Algumas destas pe√ßas poderiam ser utilizadas para compor um quebra-cabe√ßa distinto, um outro animal por exemplo. Perceba que os olhos desta imagem, √© uma pe√ßa que poderia ser reutilizada para compor uma outra figura, uma certa esp√©cie de lobo, um lince, uma on√ßa. Estas pe√ßas s√£o as denominadas MACROS e representam constru√ß√µes de fluxos que podem ser encapsulados como uma ferramenta √∫nica, visto a sua fun√ß√£o que pode ser aproveitada em demais outros problemas, servindo assim, como uma pe√ßa tamb√©m adequada para se contruir uma solu√ß√£o para problemas distintos.</p>
<p>O engenheiro de dados encontra-se constantemente nesta complexa fun√ß√£o ao desenvolver diferentes fluxos de dados, seja para integrar diferentes fontes de dados em um data lake, seja para construir bases mais refinadas para alimentar um data warehouse, para subsidiar determinadas opera√ß√µes em um data mart espec√≠fico, para adequar a qualidade dos dados, para gerar uma base anal√≠tica, para otimizar um fluxo j√° existente, para produtizar e tornar acess√≠vel determinadas an√°lises a um maior n√∫mero de pessoas, etc.</p>
<p>O papel de engenharia dentro deste cargo reside na ideia prim√°ria da exist√™ncia de um sistema sobre o qual a fun√ß√£o do engenheiro se mant√™m comprometida, recebendo mat√©rias-primas, processando estas mat√©rias-primas e agregando camadas de valor que ser√£o consolidadas em um produto final. A diferen√ßa entre engenharias se manifesta exatamente nos inputs que ser√£o recebidos para processamento e nas t√©cnicas/recursos e conhecimentos dispon√≠veis para serem empregados neste processamento, que ir√° transformar as mat√©rias-primas do sistema, agregando valor ao material bruto e resultando em um produto final de maior utilidade. Como exemplo, dentro de uma das minhas √°reas de forma√ß√£o, temos a Engenharia de Produ√ß√£o sendo definida como:</p>
<blockquote>
<p>A engenharia de produ√ß√£o trata do projeto, aperfei√ßoamento e implanta√ß√£o de sistemas integrados de pessoas, materiais, informa√ß√µes, equipamentos e energia, para a produ√ß√£o de bens e servi√ßos, de maneira econ√¥mica, respeitando os preceitos √©ticos e culturais. Tem como base os conhecimentos espec√≠ficos e as habilidades associadas √†s ci√™ncias f√≠sicas, matem√°ticas e sociais, assim como aos princ√≠pios e m√©todos de an√°lise da engenharia de projeto, para especificar, predizer e avaliar os resultados obtidos por tais sistemas.</p>
<p>&ndash; <!-- raw HTML omitted -->M√°rio Ot√°vio Batalha - Introdu√ß√£o √† Engenharia de Produ√ß√£o (Pr√™mio Jabuti 2008).<!-- raw HTML omitted --></p>
</blockquote>
<p>As defini√ß√µes das distintas engenharias s√£o muito aproximadas entre elas e, utilizando como base a descri√ß√£o acima, podemos perceber que para a Engenharia de Dados, n√≥s tamb√©m buscamos produzir bens e/ou servi√ßos, com a mentalidade em minimizar os custos e/ou maximizar a utilidade, tamb√©m √© nosso papel projetar, aperfei√ßoar e/ou implantar sistemas, utilizando dos conhecimentos, pr√≥prios ou relativos a √°rea, para especificar, predizer e avaliar os resultados obtidos pelos sistemas desenvolvidos, e, sem sombra de d√∫vida, talvez com ainda mais aten√ß√£o nesta √°rea da engenharia, existe a necessidade de alicer√ßar todo este sistema nos preceitos √©ticos e culturais existentes.</p>
<p>A real diferen√ßa reside nos inputs que iremos utilizar dentro do nosso sistema, onde a fonte primordial com a qual n√≥s iremos trabalhar, embora tamb√©m seja de import√¢ncia significativa as pessoas, informa√ß√µes, equipamentos e energia, mesmo que em diferentes graus quando comparados a engenharia de produ√ß√£o, a grande diferen√ßa encontra-se no material prim√°rio de trabalho, que prenuncia a exist√™ncia da √°rea, e que, para o Engenheiro de Dados, s√£o os pr√≥prios dados, podendo estar nos mais diferentes graus de refinamento e originados das mais diversas fontes poss√≠veis.</p>
<p>Por fim, a segunda diferen√ßa significativa √© o arcabou√ßo t√©cnico utilizado para processar a nossa mat√©ria prima, que embora perten√ßam sim √†s grandes √°reas das ci√™ncias f√≠sicas, matem√°ticas e sociais, representam nichos espec√≠ficos dentro dessas grandes √°reas, ainda assim existindo interse√ß√µes, como por exemplo em sistemas de informa√ß√£o e pesquisa operacional, grandes √°reas da engenharia de produ√ß√£o, assim como poss√≠veis semelhan√ßas quanto aos princ√≠pios da engenharia de projeto, contidas no uso das metodologias √°geis, sendo estas de import√¢ncia inequ√≠voca para manter a efici√™ncia e a organiza√ß√£o do trabalho do engenheiro de dados.</p>
<p>No entanto, embora apresente certas interse√ß√µes e semelhan√ßas, e assim ser√°, independente da engenharia que utilizemos para comparar, perceba que o conjunto de t√©cnicas e teorias utilizadas se difere em muito, sendo mais apropriado buscar estes recursos na √°rea de ci√™ncia de dados e analytics.</p>
<p>Para o seguinte trabalho, alguns termos e os conceitos que os definem s√£o importantes para o bom entendimento das necessidades da demanda:</p>
<ul>
<li>O que significa adequa√ß√£o das bases? Na terminologia utilizada dentro do projeto.</li>
<li>Como podemos definir o processo de enriquecimento?</li>
<li>Como podemos definir o processo de unifica√ß√£o?</li>
</ul>
<p>Desta forma, o seguinte post busca descrever um projeto realizado para o grupo Fleury S.A., empresa refer√™ncia na √°rea de sa√∫de, listada na bolsa de valores brasileira (FLRY3), tendo quase 100 anos de funcionamento, sendo fundada em 1926. O foco do projeto √© criar fluxos de dados que permitam dar suporte nos processos que antecedem a implementa√ß√£o efetiva do novo ERP contratado para a empresa, requisitos principalmente voltados para verifica√ß√µes e tratamentos na qualidade dos dados, demandados pela plataforma SAP.</p>
<p>Estes processos, no caso espec√≠fico, envolvem mecanismos eficientes de valida√ß√£o dos campos contidos nas principais bases que ir√£o alimentar o sistema; Aplica√ß√£o destes tratamentos em bases terceiras que servir√£o para adicionar novos campos as bases j√° existentes, complementando a base original para padronizar dados existentes entre as v√°rias entidades (clientes/especialistas) que comp√µem a base, seguindo a l√≥gica de um processo de enriquecimento; Indica√ß√£o de registros apropriados para se adicionar/atualizar em produ√ß√£o e registros inconsistentes que necessitam de an√°lise manual e corre√ß√£o antes de serem repassado a base em produ√ß√£o, seguindo a l√≥gica de um processo de unifica√ß√£o.</p>
<h2 id="contextualiza√ß√£o-do-projeto">Contextualiza√ß√£o do Projeto</h2>
<p>Projeto, no formato de automatiza√ß√£o, tendo como produto final dois tipos de fluxos:</p>
<ol>
<li>
<p>Fluxos de dados respons√°veis por aplicar os tratamentos necess√°rios e atualizar as principais bases de opera√ß√£o da empresa, assim como indicar registros inconsistentes que necessitem de verifica√ß√£o manual.</p>
</li>
<li>
<p>Fluxos de dados, encapsulados em ferramenta √∫nica (denominadas macros) para cada campo a ser avaliado, respons√°veis pela valida√ß√£o dos principais campos existentes nas bases operacionais, permitindo reprodu√ß√£o e f√°cil utiliza√ß√£o em qualquer outro processo de prepara√ß√£o de dados necess√°rio.</p>
</li>
</ol>
<p>Os fluxos de dados entregues ao final do projeto, foram constru√≠dos utilizando bases internas da empresa e bases terceiras contratadas para ajudar no processo de enriquecimento. Desta forma, visto as demandas iniciais de ajuste na qualidade dos dados que seriam semelhantes nos dois processos necess√°rios a finaliza√ß√£o do projeto (Enriquecimento e Unifica√ß√£o), assim como do entendimento dos dados e semelhan√ßa de campos entre bases operacionais (Clientes e Especialistas), torna-se apropriado a constru√ß√£o de macros que d√™em a liberdade para o cliente reproduzir estes fluxos, j√° criados e encapsulados, em demais opera√ß√µes e an√°lises que sejam necess√°rias dentro dos v√°rios departamentos da empresa.</p>
<p>Este projeto, embora inserido em um contexto espec√≠fico de &ldquo;tratamentos necess√°rios previamente √† transi√ß√£o de um ERP&rdquo;, pertence a um contexto maior que envolve a gera√ß√£o de uma &ldquo;pipeline&rdquo; de dados, fun√ß√£o caracter√≠stica do engenheiro de dados, compondo uma de suas principais atribui√ß√µes. Esta &ldquo;pipeline&rdquo; √© sub-componente de uma &ldquo;pipeline&rdquo; maior, aquela que vai da fonte de gera√ß√£o dos dados (a alimenta√ß√£o do sistema com dados de novos clientes e especialistas) at√© as m√£os dos potenciais analistas que se servir√£o destes valores, sendo usu√°rios do banco de dados.</p>
<p>Lembrando que uma &ldquo;pipeline&rdquo; de dados, nada mais √© do que um conjunto de etapas que visa levar os dados de um ponto A para um ponto B, adequando estes dados para aqueles que ser√£o os usu√°rios no ponto B.</p>
<p>A exce√ß√£o para o processo de ETL encontra-se na adi√ß√£o das dimens√µes de processamento, sequenciamento e depend√™ncias, monitoramento, assim como, a defini√ß√£o dos storages, fatores estes com peculiaridades intr√≠nsecas a cada demanda.</p>
<p>Na nossa &ldquo;pipeline&rdquo; espec√≠fica, dentro do contexto da demanda, temos as seguintes descri√ß√µes para as componentes da &ldquo;pipeline&rdquo;:</p>
<ul>
<li>
<p>Origem: Fontes de dados internas contemplando Clientes e Especialistas; Fontes de dados terceiras complementando informa√ß√µes das bases internas.</p>
</li>
<li>
<p>Destino: Neste projeto o destino permanece o mesmo da origem. Os fluxos ter√£o o objetivo de modificar a base original, apurando a qualidade dos dados, enriquecendo a base original com informa√ß√µes complementares e retornando a base processada para sua origem, tomando o lugar da atual base de dados em produ√ß√£o.</p>
</li>
<li>
<p>Principais Transforma√ß√µes: Deduplica√ß√µes, padroniza√ß√µes, atualiza√ß√£o/preenchimento por correspond√™ncia (L√≥gica Fuzzy) e valida√ß√µes.</p>
</li>
<li>
<p>Sequenciamento e Depend√™ncias: Macros de valida√ß√£o (Base de Enriquecimento) -&gt; Enriquecimento -&gt; Macros de Valida√ß√£o (Base Principal) -&gt; Unifica√ß√£o -&gt; Macros de Valida√ß√£o -&gt; Monitoramento.</p>
</li>
<li>
<p>Monitoramento: Alertas gerados pelos registros inconsistentes em acordo com a etapa de detec√ß√£o da inconsist√™ncia (i.g. Enriquecimento, Unifica√ß√£o, Final). E-mail enviado aos respons√°veis pelas verifica√ß√µes manuais com as identifica√ß√µes dos registros inconsistentes e o diagn√≥stico superficial.</p>
</li>
</ul>
<h3 id="projeto">Projeto</h3>
<p>Projeto contratado com urg√™ncia pelo grupo Fleury, para atuar na estrat√©gia de mudan√ßa de ERP da empresa, adquirindo plataforma SAP e necessitando verificar e executar, dentro das regras exigidas pela nova plataforma, todo o processo de checagem da qualidade dos dados, adequando as bases aos processos de valida√ß√£o exigidos pela plataforma.</p>
<p>O projeto, al√©m do objetivo principal mencionado em par√°grafo anterior, tamb√©m tinha como principais atividades, realizar, atrav√©s de bases terceiras contratadas pelo grupo Fleury, todo o processo de enriquecimento das bases de dados de clientes e profissionais de sa√∫de, para, em seguida, trabalhar no processo de unifica√ß√£o, destas bases j√° enriquecidas, nos bancos de dados principais da empresa.</p>
<p>Desta forma, para avaliar a qualidade dos dados e adequar aos processos exigidos pela plataforma SAP, foi convertido, todas as regras de neg√≥cio definidas em documento redigido pelo grupo Fleury, em diferentes fluxos de dados, transformando cada um destes fluxos em macros que permitissem automatizar os processos futuros, sendo os fatores de repetitividade e reprodutibilidade essenciais para o sucesso do projeto, facilitando o entendimento da l√≥gica utilizada para convers√£o das regras de neg√≥cio, atrav√©s de documenta√ß√£o passo-a-passo nos fluxos desenvolvidos, e assim permitindo tamb√©m reproduzir a mesma l√≥gica em ferramentas distintas. Ao todo, foram desenvolvidos 10 macros para verificar os campos de nome completo, RG, CPF, CRM, especialidade, telefone, e-mail, data de nascimento e √≥bito, passaporte e sexo.</p>
<p>Como exemplo de valida√ß√£o, tomemos o caso de CPF&rsquo;s inconsistentes. Qual seria o procedimento formal para avaliar se um dado CPF apresenta numera√ß√£o v√°lida ou n√£o?</p>
<p>Neste exemplo, o fluxo criado avalia a estrutura e os d√≠gitos verificadores do CPF, considerando os dados como consistentes quando as seguintes regras s√£o v√°lidas:</p>
<pre tabindex="0"><code>1. Recusar todos os d√≠gitos iguais.
2. Realizar o c√°lculo do d√≠gito verificador conforme padr√£o do CPF.
3. Possui onze caracteres.
4. Aceitar o preenchimento apenas com n√∫meros.
5. Campos em branco ou nulos s√£o considerados inconsistentes.

</code></pre><p>A imagem abaixo √© uma representa√ß√£o de um fluxo desenvolvido para considerar as 5 regras descritas acima:</p>
<p><img src="/post/recentworks/Macro_CPF.PNG" alt="LeonardoDantas"></p>
<p>Assim, para implementa√ß√£o destas regras, faz-se uso de express√µes regulares como por exemplo na regra 1 e regra 4. As express√µes regulares permitem avaliar padr√µes de caracteres para operacionalizar a partir da correspond√™ncia entre o padr√£o e o campo analisado.</p>
<p>Na regra 1, por exemplo, utilizamos o seguinte RegEx (Express√£o Regular) para avaliar se h√° ou n√£o correspond√™ncia do campo avaliando com o padr√£o definido no RegEx, resultando em uma nova coluna com apenas 2 poss√≠veis valores, Verdadeiro ou Falso:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#f92672">RegEx</span>: <span style="color:#e6db74">&#34;^(.)\1{8}$&#34;</span>

<span style="color:#f92672">Par√¢metros</span>:

  <span style="color:#f92672">^ &amp; $</span>: <span style="color:#e6db74">&#34;Marcadores utilizados para definir o in√≠cio e o fim do padr√£o de texto, delimitando o CPF para conter apenas o que fora especificado na express√£o.&#34;</span>

  <span style="color:#f92672">(.)</span>: <span style="color:#e6db74">&#39;O ponto significa &#34;qualquer caractere (exceto quebras de linha)&#34; e os par√™nteses formam um grupo de captura para utilizar posteriormente como refer√™ncia. Isso quer dizer que o primeiro caractere do CPF ser√° capturado por este grupo.&#39;</span>

  <span style="color:#f92672">\1</span>: <span style="color:#e6db74">&#39;Representa uma backreference, ou seja, ela significa &#34;o mesmo texto que foi capturado no primeiro grupo&#34;, ou seja, para o nosso caso, o primeiro caractere do CPF.&#39;</span>

  {<span style="color:#f92672">8}</span>: <span style="color:#e6db74">&#34;Qualifica a refer√™ncia indicada pelo backreference, definindo a quantidade de repeti√ß√µes que se deve buscar do grupo de captura referenciado.&#34;</span>

</code></pre></div><p>Desta forma, caso o campo analisado possua um valor de CPF cujo os 8 √∫ltimos n√∫meros sejam iguais ao primeiro n√∫mero, o RegEx acima apontar√° como &ldquo;Verdadeiro&rdquo; para o campo analisado, sendo necess√°rio posteriormente filtrar todos estes valores verdadeiros julgados como inconsistentes.</p>
<p>Dentre as regras descritas acima, outra de maior curiosidade √© o c√°lculo do d√≠gito verificador conforme padr√£o do CPF. Uma regra que lembro que fiquei surpreso ao realizar o trabalho pois n√£o sabia da exist√™ncia de um racioc√≠nio matem√°tico por tr√°s da estrutura do CPF.</p>
<pre tabindex="0"><code>Valida√ß√£o do primeiro d√≠gito verificador:

No exemplo, vamos supor que o valor de CPF seja 029.278.583-65.

Devemos ent√£o multiplicar os 9 primeiros d√≠gitos do CPF pela sequ√™ncia decrescente de n√∫meros de 10 √† 2, posteriormente somando os resultados. 

0 * 10 + 2 * 9 + 9 * 8 + 2 * 7 + 7 * 6 + 8 * 5 + 5 * 4 + 8 * 3 + 3 * 2 = 236

O pr√≥ximo passo da verifica√ß√£o √© multiplicar o resultado do somat√≥rio por 10 e dividir por 11.

(236 * 10) / 11 = 214 com RESTO da divis√£o igual a 6.

O primeiro d√≠gito verificador (primeiro d√≠gito depois do '-') deve ser equivalente ao RESTO desta divis√£o. Caso apresente diverg√™ncias o CPF j√° pode ser julgado como inconsistente.

</code></pre><p>O segundo d√≠gito verificador apresenta regras semelhantes:</p>
<pre tabindex="0"><code>Valida√ß√£o do segundo d√≠gito verificador:

Utilizando o mesmo CPF da primeira verifica√ß√£o, devemos agora multiplicar os 10 primeiros d√≠gitos (n√£o apenas os 9 primeiros) do CPF pela sequ√™ncia decrescente de n√∫meros de 11 √† 2, posteriormente somando os resultados. 

0 * 11 + 2 * 10 + 9 * 9 + 2 * 8 + 7 * 7 + 8 * 6 + 5 * 5 + 8 * 4 + 3 * 3 + 6 * 2 = 292

O pr√≥ximo passo da verifica√ß√£o √© multiplicar o resultado do somat√≥rio por 10 e dividir por 11.

(292 * 10) / 11 = 265 com RESTO da divis√£o igual a 5.

Assim, como o RESTO desta divis√£o corresponde ao segundo d√≠gito verificador e sabendo que o primeiro d√≠gito j√° fora validado, podemos considerar este CPF como consistente quanto a estas regras.  

</code></pre><p>Para avaliar demais regras poss√≠veis de se utilizar na valida√ß√£o destes e demais campos, recomendo o documento aberto da SIPREV (Sistema integrado de informa√ß√µes previdenci√°rias), redigindo detalhes das regras de neg√≥cio utilizadas em projeto pr√≥prio. Segue o link: <a href="http://sa.previdencia.gov.br/site/2015/07/rgrv_RegrasValidacao.pdf">http://sa.previdencia.gov.br/site/2015/07/rgrv_RegrasValidacao.pdf</a>.</p>
<p>Desta forma, baseado nos exemplos acima, foram constru√≠dos fluxos de dados que continham as v√°rias regras implementadas neles e como dito estes fluxos foram encapsulados em ferramenta √∫nica como ilustrado no gif abaixo:</p>
<p><img src="/post/recentworks/Macro_CPF2.gif" alt="LeonardoDantas"></p>
<p>No gif acima, √© poss√≠vel perceber que a nova ferramenta, com √≠cone caracterizando o CPF, quando aberta e avaliada sua composi√ß√£o, nada mais √© do que o mesmo fluxo desenvolvido para considerar as 5 regras descritas acima, equivalente a imagem j√° mostrada anteriormente neste post.</p>
<p>Dando continuidade ao projeto, para melhor adequar a qualidade dos dados √†s exig√™ncias na nova plataforma, foi utilizado l√≥gica fuzzy para tratar os registros de clientes e especialistas imprecisamente preenchidos, permitindo preencher conforme determinado padr√£o, registros que, embora apresentem preenchimentos distintos, ainda se tratam da mesma pessoa.</p>
<p>Os processos de enriquecimento e unifica√ß√£o j√° se beneficiaram das macros anteriormente desenvolvidas, sendo utilizadas para avaliar a consist√™ncia dos campos, gerando revalida√ß√µes das bases terceiras e permitindo a correta associa√ß√£o entre as bases terceiras e bases pr√≥prias.</p>
<p>No fim, foi gerado um fluxo para cada processo, enriquecimento e unifica√ß√£o, juntamente com as macros de valida√ß√£o das regras de neg√≥cio, sendo poss√≠vel realizar os processos de unifica√ß√£o e enriquecimento dos dados j√° validados, assim como enviar para a equipe respons√°vel os diferentes registros que apresentavam algum tipo de inconsist√™ncia, identificando a raz√£o da inconsist√™ncia e podendo ent√£o liberar tempo para a equipe focar nas causas e solu√ß√µes para as inconsist√™ncias encontradas, antes de seguir com estes registros para as bases principais.</p>
<h2 id="leonardo-dantas">Leonardo Dantas</h2>
<p>Consultor em an√°lise de dados com 4+ anos de experi√™ncia trabalhando em projetos para grandes empresas de diferentes segmentos do mercado como Fleury S.A., Souza Cruz Ltda., KPMG Consultoria Ltda., etc. Mente orientada para possibilidade de produtiza√ß√£o dos servi√ßos ao longo do per√≠odo de desenvolvimento. Desde estagi√°rio atuando em toda cadeia de atividades de consultoria, a come√ßar por relacionamento com os clientes, apresentando portf√≥lio de servi√ßos e acompanhando os servi√ßos j√° prestados, at√© as etapas de apresenta√ß√£o e fechamento do projeto (gest√£o do conhecimento), passando por atividades de entendimento de demandas/coleta de requisitos, atividades de desenvolvimento, como provas de conceito/estudos/projetos, e atividades de monitoramento e acompanhamento dos projetos em execu√ß√£o. Especialista na constru√ß√£o de fluxos ETL e no manuseio do software Alteryx Designer, ministrando cursos e treinamentos nesta ferramenta para grandes consultorias como Falconi Consultores S.A. e KPMG Consultoria Ltda. Movido por desafios e sempre interessado em buscar formas mais eficientes de se resolver problemas, acreditando fortemente que o potencial humano de tomar decis√µes coerentes pode ser significativamente alavancado com o uso de tecnologias da √°rea de ci√™ncia de dados e de metodologias da √°rea de analytics.</p>


					</div>

				</article>

			</div>

		</div> 

		<div class="row">

			<div class="col-sm-8 col-sm-offset-2">

				<div id="share">

					

				</div>

			</div>

		</div> 

		<div class="clearfix"></div>

		<div class="row">

			<div class="col-sm-8 col-sm-offset-2">

				<div id="comments">

					

				</div>

			</div>

		</div> 

		<div class="clearfix"></div>

	</div>	

</main>


    
    
      <footer id="footer">
	<div class="container">
		<div class="row">
			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Contact</h3>
				<div class="widget-body">
					<p>&#43;55 85 9-9939-8866<br>
					<a href="mailto:DantasLeonardoMPRO@gmail.com">DantasLeonardoMPRO@gmail.com</a><br>
					<br>
					Av. Almirante Henrique SabÛia, 700, Fortaleza, CE 60175-442, Brasil
					</p>
				</div>
			</div>
			

			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Follow me</h3>
				<div class="widget-body">
					<p class="follow-me-icons">
            
							
								<a href="https://www.facebook.com/nickname" target="_blank"><i class="fab fa-facebook-square fa-1x"></i></a>
							
            
							
								<a href="https://twitter.com/nickname" target="_blank"><i class="fab fa-twitter-square fa-1x"></i></a>
							
            
							
								<a href="https://www.instagram.com/nickname" target="_blank"><i class="fab fa-instagram fa-1x"></i></a>
							
            
							
            
							
            
							
            
							
								<a href="https://github.com/nickname" target="_blank"><i class="fab fa-github fa-1x"></i></a>
							
            
							
            
					</p>
				</div>
			</div>
			

			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Text widget</h3>
				<div class="widget-body">
					<p>
						Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque, nihil natus explicabo ipsum quia iste aliquid repellat eveniet velit ipsa sunt libero sed aperiam id soluta officia asperiores adipisci maxime!
					</p>
					<p>
						Lorem ipsum dolor sit amet, consectetur adipisicing elit. Atque, nihil natus explicabo ipsum quia iste aliquid repellat eveniet velit ipsa sunt libero sed aperiam id soluta officia asperiores adipisci maxime!
					</p>
				</div>
			</div>
			

			
			<div class="col-md-3 widget">
				<h3 class="widget-title">Form widget</h3>
				<div class="widget-body">
					<p>&#43;55 85 9-9939-8866<br>
					<a href="mailto:DantasLeonardoMPRO@gmail.com">DantasLeonardoMPRO@gmail.com</a><br>
					<br>
					Av. Almirante Henrique SabÛia, 700, Fortaleza, CE 60175-442, Brasil
					</p>
				</div>
			</div>
			

		</div> 
	</div>
</footer>

<footer id="underfooter">
	<div class="container">
		<div class="row">

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p>Av. Almirante Henrique SabÛia, 700, Fortaleza, CE 60175-442, Brasil</p>
				</div>
			</div>

			<div class="col-md-6 widget">
				<div class="widget-body">
					<p class="text-right">
						Copyright &copy; 2022, Leonardo Dantas<br>
						Design: <a href="http://www.gettemplate.com" rel="designer">Initio by GetTemplate</a> - 
						Powered by: <a href="https://gohugo.io/" rel="poweredby">Hugo</a>
					</p>
				</div>
			</div>

		</div> 
	</div>
</footer>




<script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
<script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>




<script src="https://testandoumteste.onrender.com/js/bundle.min.f4a965ad0a8118e32f8f0f158ff3aadbacf700934c22286a1a5b245105e9006da73a873b001a160db22498909c1df14d1f835dba5ad76f80b32b0234182b2a58.js" integrity="sha512-9KllrQqBGOMvjw8Vj/Oq26z3AJNMIihqGlskUQXpAG2nOoc7ABoWDbIkmJCcHfFNH4NdulrXb4CzKwI0GCsqWA=="></script>

<script id="dsq-count-scr" src="//hugo-initio-site.disqus.com/count.js" async></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'GA-000000000-0', 'auto');
  ga('send', 'pageview');
</script>

</body>
</html>

    
  </body>
  
</html>